{% extends 'layouts/authenticated.html.twig' %}

{% block title %}Review Completed{% endblock %}

{% block body %}
<div style="display: flex; align-items: center; justify-content: center; height: 80vh;">
    <div style="text-align: center;">
        <h1 style="font-size: 3rem; margin-bottom: 1rem;">🎉 Congratulations!</h1>
        <p style="font-size: 2rem; margin-bottom: 2rem;">{{ message }}</p>

        <div style="font-size: 1.5rem; margin-bottom: 2rem; color: #333;">
            <p>⭐ XP Gained: <strong>+{{ cardsReviewedCount }}</strong></p>
            <p>💧 Water Gained: <strong>+{{ cardsReviewedCount }}</strong></p>
        </div>

        {% if flameLit is defined and flameLit %}
            <video id="flame-video" autoplay muted loop playsinline style="width: 80px; margin-top: 2rem;">
                <source src="{{ asset('game/assets/achievement/flame.mp4') }}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        {% endif %}

        <a href="{{ path('app_deck') }}"
           class="bg-gray-500 text-white px-6 py-3 rounded hover:bg-gray-600 transition">
            Back to my decks
        </a>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            confetti({
                particleCount: 200,
                spread: 120,
                origin: { y: 0.6 }
            });

            console.log('🔥 Page loaded – confetti active');
        });
    </script>
{% endblock %}
