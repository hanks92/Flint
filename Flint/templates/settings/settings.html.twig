{% extends 'layouts/authenticated.html.twig' %}

{% block title %}Account Settings{% endblock %}

{% block body %}
<div style="margin-top: 4rem; display: flex; flex-direction: column; align-items: center; text-align: center; min-height: 80vh; width: 100%;">

    <h1 class="text-5xl font-extrabold text-gray-900 dark:text-white leading-tight mb-6">
        Edit <span style="color: #2E5077;">your settings</span>
    </h1>

    <div style="width: 100%; max-width: 448px; text-align: left;">
        {{ form_start(settingsForm) }}

            <div style="margin-bottom: 1.5rem;">
                {{ form_label(settingsForm.username, 'Username', { 'label_attr': { 'style': 'display: block; font-weight: bold; margin-bottom: 0.5rem;' } }) }}
                {{ form_widget(settingsForm.username, {
                    'attr': {
                        'placeholder': 'Enter your username',
                        'style': 'width: 100%; padding: 0.75rem; font-size: 1rem; border-radius: 0.5rem; border: 1px solid #ccc;'
                    }
                }) }}
                {{ form_errors(settingsForm.username) }}
            </div>

            <div style="margin-bottom: 1.5rem;">
                {{ form_label(settingsForm.plainPassword, 'New password', { 'label_attr': { 'style': 'display: block; font-weight: bold; margin-bottom: 0.5rem;' } }) }}
                {{ form_widget(settingsForm.plainPassword, {
                    'attr': {
                        'placeholder': 'Enter a new password',
                        'style': 'width: 100%; padding: 0.75rem; font-size: 1rem; border-radius: 0.5rem; border: 1px solid #ccc;'
                    }
                }) }}
                {{ form_errors(settingsForm.plainPassword) }}
            </div>

            <div style="margin-bottom: 1.5rem;">
                <label style="display: block; font-weight: bold; margin-bottom: 0.5rem;">Choose an avatar</label>
                <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.75rem;" id="avatar-selection">
                    {% for choice in settingsForm.profileImage %}
                        <label style="cursor: pointer; text-align: center;">
                            {{ form_widget(choice, {'attr': {'style': 'display: none;'}}) }}
                            <img src="{{ asset(choice.vars.value) }}" alt="Avatar"
                                 style="width: 100%; aspect-ratio: 1; object-fit: cover; border-radius: 50%; border: 2px solid #ccc; transition: border-color 0.2s ease;" />
                        </label>
                    {% endfor %}
                </div>
                {{ form_errors(settingsForm.profileImage) }}
            </div>

            <div style="margin-bottom: 1.5rem;">
                {{ form_label(settingsForm.theme, 'Theme', { 'label_attr': { 'style': 'display: block; font-weight: bold; margin-bottom: 0.5rem;' } }) }}
                {{ form_widget(settingsForm.theme, {
                    'attr': {
                        'style': 'width: 100%; padding: 0.75rem; font-size: 1rem; border-radius: 0.5rem; border: 1px solid #ccc;'
                    }
                }) }}
                {{ form_errors(settingsForm.theme) }}
            </div>

            <div style="text-align: center;">
                <button type="submit"
                        style="width: 100%; background-color: #2E5077; color: white; border: none; padding: 1rem; border-radius: 0.75rem; font-size: 1.1rem; cursor: pointer;">
                    Save changes
                </button>
            </div>

        {{ form_end(settingsForm) }}
    </div>
</div>
{% endblock %}
